/* empty css                  *//* empty css                   */import{I as F,a as L,M as q,e as J,s as b}from"./notifications-e9df1fe4.js";import{f as y,_ as M}from"./format-55200e38.js";import{h as w,P as B}from"./el-icon-37d8cfb4.js";import{_ as $}from"./plugin-vue_export-helper-b2bddca3.js";import{d as N,a as C,r as o,K as P,P as W,m as x,h as U,i as p,w as s,k as v,j as f,S as g,Y as H,J as j,n as k,U as z,R as K,g as Y}from"./index-1fdc2001.js";/* empty css                     *//* empty css                  */var G={title:"\u8D44\u6E90\u7BA1\u7406",propList:[{prop:"title",label:"\u540D\u79F0"},{prop:"url",label:"\u5730\u5740",slotName:"link"},{prop:"color",label:"\u989C\u8272",slotName:"color"}]};const D="200px",Q=[{type:F.input,field:"title",label:"\u540D\u79F0: ",labelWidth:D,required:!0,rules:[],otherOptions:{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:!0}},{type:F.input,field:"url",label:"\u5730\u5740: ",labelWidth:D,rules:[],otherOptions:{placeholder:"\u8BF7\u8F93\u5165\u94FE\u63A5\u5730\u5740",clearable:!0}},{type:F.input,field:"color",label:"\u989C\u8272: ",required:!1,labelWidth:D,rules:[],otherOptions:{placeholder:"\u8BF7\u8F93\u5165\u989C\u8272\u8272\u503C\uFF0C\u5982#ffffff",clearable:!0}}],E={list:async(c={})=>{const{data:u}=await w.post(B+"/site_hot/get",c);return u==null||u.hot_data.forEach(a=>{a.id=a.title}),u==null?void 0:u.hot_data},edit:async c=>{const{data:u}=await w.post(B+"/site_hot/update",{hot_type:"resource",hot_data:c});return u==null?void 0:u.status}};const X=["href"],Z=N({name:"metaTableTest"}),ee=N({...Z,setup(c){C({name:"",work_id:""});const u=o(0),a=o([]),m=async()=>{const e=await E.list({hot_type:"resource"});a.value=e},A=()=>{u.value=a.value.length,r.value={title:"",url:"",color:""},a.value,i.value=!0,_.value="\u6DFB\u52A0\u70ED\u95E8\u8D44\u6E90"},n=o(""),S=async e=>{if(r.value=e,n.value=e.title,u.value=a.value.findLastIndex(t=>t.title===e.title&&t.url==e.url),r.value=JSON.parse(JSON.stringify(a.value.find(t=>t.title===e.title&&t.url==e.url))),u.value==-1){J("\u83B7\u53D6\u6570\u636E\u5931\u8D25");return}i.value=!0,_.value="\u7F16\u8F91\u70ED\u95E8\u8D44\u6E90"};o(40),o(1),o(10);const T=C({worker_id:[{required:!0,message:"\u8BF7\u8F93\u5165\u5DE5\u53F7",trigger:"blur"},{validator:(e,t,d)=>{t.trim().length!==7?d(new Error("\u5DE5\u53F7\u7684\u957F\u5EA6\u5FC5\u987B\u4E3A7")):isNaN(Number(t))?d(new Error("\u5DE5\u53F7\u4E2D\u53EA\u80FD\u5305\u542B\u6570\u5B57")):d()},trigger:"blur"}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D",trigger:"blur"}],phone:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E",trigger:"blur"}]}),h=o(),i=o(!1),_=o(""),r=o({});P(()=>i.value,()=>{!i.value&&!n.value&&(n.value="")});const I=async()=>{n.value?r.value=JSON.parse(JSON.stringify(a.value.find(e=>e.title===n.value&&e.title==n.value))):r.value={}},V=async e=>{a.value=a.value.filter(t=>t.id!==e),await E.edit(a.value),b("\u5220\u9664\u6210\u529F"),m()},O=async()=>{if(await h.value.validFun()){for(let e in r.value)typeof r.value[e]=="string"&&(r.value[e]=r.value[e].trim());a.value[u.value]=r.value,r.value,u.value,a.value,await E.edit(a.value),b("\u64CD\u4F5C\u6210\u529F"),i.value=!1,m()}};return m(),(e,t)=>{const d=Y,R=W;return x(),U("div",null,[p(M,null,{default:s(()=>[p(v(L),{propList:v(G).propList,tableData:a.value,onAddData:A,onEditData:S,onDeleteData:V},{link:s(l=>[f("a",{href:l.row.url},g(l.row.url),9,X)]),color:s(l=>[f("div",{style:H(`width: 20px;height:20px;background-color:${l.row.color}`)},null,4)]),createdTime:s(l=>[f("div",null,g(v(y)(l.row.created_at)),1)]),updatedTime:s(l=>[f("div",null,g(v(y)(l.row.updated_at)),1)]),_:1},8,["propList","tableData"])]),_:1}),i.value?(x(),j(z,{key:0,to:"body"},[p(R,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=l=>i.value=l),title:_.value,width:"500px"},{footer:s(()=>[p(d,{onClick:t[1]||(t[1]=l=>I()),link:""},{default:s(()=>[k("\u91CD\u7F6E")]),_:1}),p(d,{type:"primary",onClick:t[2]||(t[2]=l=>O())},{default:s(()=>[k("\u786E\u8BA4")]),_:1})]),default:s(()=>[p(v(q),{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),rules:T,ref_key:"editFormRef",ref:h,formItems:v(Q),inline:!1,showRefresh:!1,showSearch:!1,labelWidth:"120px",labelPosition:"right"},null,8,["modelValue","rules","formItems"])]),_:1},8,["modelValue","title"])])):K("",!0)])}}});var pe=$(ee,[["__scopeId","data-v-77a3c536"]]);export{pe as default};
